let lfm_play = document.getElementById('lastfm-playing');
let lfm_content = document.getElementById('lastfm-content');
let lfm_image = document.getElementById('lastfm-image');
fetch('https://lastfm-last-played.biancarosa.com.br/saperoi/latest-song').then(function (response) {return response.json()}).then(function (json) {
if('@attr' in json['track']) { lfm_play.innerHTML = "is now playing" } else { lfm_play.innerHTML = "last played" }
lfm_content.innerHTML = json['track']['name'] + '<br>' + json['track']['artist']['#text'];
lfm_image.innerHTML = '<img class="display_only_pc" src="' + json['track']['image'][1]['#text'] +'"><img class="display_only_mobile" src="' + json['track']['image'][3]['#text'] +'">'
});

pres = 2
for (const button of document.getElementsByClassName('mainbutton')) {
    button.style = `transform: rotate3d(0, 0, 1, ${Math.round(Math.random()*16*pres-8*pres)/pres}deg)`;
    button.addEventListener('mouseover', () => {mouseoverClick()})
}

const icoscape = () => {
    playAudio("https://files.catbox.moe/as06cd.mp3")
    displayAlt('spinIcosa');
    displayAlt('content');
    displayAlt('footer')
}

const rotateGirl = () => {
    body = document.getElementsByTagName("body")[0];
    body.className = "rotateGirl";
}


// stolen from https://alan460.neocities.org/

let p = new Promise ((resolve, reject) => {
	const jsonRequest = new XMLHttpRequest();
	jsonRequest.onload = () =>{
		if(jsonRequest.status == 200){
			resolve(JSON.parse(jsonRequest.responseText));
		}
	}
	jsonRequest.open("get", "https://weirdscifi.ratiosemper.com/neocities.php?sitename=sapero");
	jsonRequest.send();
})

p.then(response => {
	const num_arr = response.info.views.toString().split("");
	let num_str = "";
	for (i = 0; i < num_arr.length; i++) {
		num_str += num_arr[i];
		if ( (num_arr.length-1 - i) % 3 == 0 && (num_arr.length-1 - i) != 0 ) {num_str += ".";}
	}
	document.getElementById("viewcount").innerHTML = num_str;
}).catch(() => {})

splashtext = [
    "a computer is an angel made of silicon",
    "julliet asked me to write something in her marquee but idk what - my girlfriend 01",
    "whagever",
    "sword slash to the chest and you're on fire",
    "you cannot kill me in a way that matters",
    "Two Drums and a Cymbal Fall off a Cliff - b'doom, tssh",
    "i'd like to make myself believe",
    "it's hard to say that i'd rather stay awake when i'm asleep",
    "think hello and wait",
    "hey look at this really cool rock -> <span class='emoji'>ü™®<span>",
    "to become god is the loneliest achievement of them all",
    "wrong! the Pit",
    "Ayo, the pizza here!",
    "Nature, I guess",
    "the inherent sexuality of machinery",
    "because music killed my grandma, okay?!",
    "A Red spy is in The Base!",
    "So I Herd U Liek Mudkipz",
    "fuck it, we ball",
    "ball is life",
    "han solo shot first",
    "hello there",
    "i have the high ground",
    "one is the loneliest number",
    "the meaning of life is 42.",
    "mi unpa e mama sina",
    "yesterday i asked you",
    "change da world. my final message. goodbye.",
    "it's three dicks on a bench",
    "uwu",
    "owo",
    "erm ackshually <span class='emoji'>ü§ì‚òùÔ∏è</span>",
    "isn't america basically the planet ?",
    "needs more protein",
    "add some protein",
    "whats up fam squad?",
    "a lightswitch.",
    "me me big girl",
    "twitter for android",
    "put, it in, my mouth",
    "let's vore, immediately!",
    "alexa play despacito",
    `<a style="text-decoration: underline;" onclick="playAudio('https://www.myinstants.com/media/sounds/bruh-sound-effect_WstdzdM.mp3')">bruh sound effect #2</a>`,
    `<a style="text-decoration: underline;" onclick="playAudio('https://www.myinstants.com/media/sounds/jixaw-metal-pipe-falling-sound.mp3')">metal pipe</a>`,
    "okay so 18 pounds of cokane, 12 pounds of crake and 7 male stripers. but make sure none of them are white, i cant see the coke on them if they are",
    "nah i'd win",
    "pee is stored in the balls",
    "gender is stored in the void",
    "the best thing since sliced bread",
    "no matter where you go, everyone's connected"
];

const loadBlinkies = () => {
    document.getElementById("loadem").remove();
    document.getElementById("marqueediv").style.display = "initial";
    marquees = {
        blinkie: document.getElementById('blinkie'),
        button: document.getElementById('button'),
        stamp: document.getElementById('stamp'),
        badge: document.getElementById('badge'),
        userbox: document.getElementById('userbox'),
        otherthing: document.getElementById('otherthing'),
    }
    blinkies = [
        {img: "acab.gif", alt:"", link:""},
        {img: "adhd.gif", alt:"", link:""},
        {img: "autism_inf.gif", alt:"", link:""},
        {img: "autism_tbh.gif", alt:"", link:""},
        {img: "autistic.gif", alt:"", link:""},
        {img: "bekindpc.gif", alt:"", link:""},
        {img: "bi_pride.gif", alt:"", link:""},
        {img: "catboy_rights.gif", alt:"", link:""},
        {img: "connection.gif", alt:"", link:""},
        {img: "construction.gif", alt:"", link:""},
        {img: "cringebutfree.gif", alt:"", link:""},
        {img: "davinky.gif", alt:"", link:""},
        {img: "digigender.gif", alt:"", link:""},
        {img: "doggirl.gif", alt:"", link:""},
        {img: "dvdslot.gif", alt:"", link:""},
        {img: "eattherich.gif", alt:"", link:""},
        {img: "eggman.gif", alt:"", link:""},
        {img: "epictransbian.gif", alt:"", link:""},
        {img: "fml.gif", alt:"", link:""},
        {img: "fuckbeautystandards.gif", alt:"", link:""},
        {img: "fulloflove.gif", alt:"", link:""},
        {img: "gamerselfdx.gif", alt:"", link:""},
        {img: "genderprogram.gif", alt:"", link:""},
        {img: "gender_robot.gif", alt:"", link:""},
        {img: "glitch.png", alt:"", link:""},
        {img: "hal9000.gif", alt:"", link:""},
        {img: "iloveendermen.gif", alt:"", link:""},
        {img: "internetloser.gif", alt:"", link:""},
        {img: "judge.gif", alt:"", link:""},
        {img: "local58.gif", alt:"", link:""},
        {img: "love_my_puter.gif", alt:"", link:""},
        {img: "manytabs.gif", alt:"", link:""},
        {img: "mathnerd.gif", alt:"", link:""},
        {img: "nb_pride.gif", alt:"", link:""},
        {img: "neocities.gif", alt:"", link:""},
        {img: "neurogender.gif", alt:"", link:""},
        {img: "normal.gif", alt:"", link:""},
        {img: "nya.gif", alt:"", link:""},
        {img: "ow eyes.gif", alt:"", link:""},
        {img: "penislmao.gif", alt:"", link:""},
        {img: "perish.gif", alt:"", link:""},
        {img: "radioactive.gif", alt:"", link:""},
        {img: "shapeshifter.gif", alt:"", link:""},
        {img: "sharksarereal.gif", alt:"", link:""},
        {img: "slimegirl.gif", alt:"", link:""},
        {img: "sourcecodelife.gif", alt:"", link:""},
        {img: "spiritphone.gif", alt:"", link:""},
        {img: "stargazer.gif", alt:"", link:""},
        {img: "strawberryxoxo.gif", alt:"", link:""},
        {img: "t4tforever.gif", alt:"", link:""},
        {img: "timeblind.gif", alt:"", link:""},
        {img: "transbeam.gif", alt:"", link:""},
        {img: "transrights.gif", alt:"", link:""},
        {img: "typo.gif", alt:"", link:""},
        {img: "ususus.gif", alt:"", link:""},
        {img: "viewmonster.gif", alt:"", link:""},
        {img: "virulent.gif", alt:"", link:"https://hyenahobbies.com/"},
        {img: "walking_kirby.gif", alt:"", link:""},
        {img: "waterdrinker.gif", alt:"", link:""},
        {img: "websiteisgay.gif", alt:"", link:""},
        {img: "xenogender.gif", alt:"", link:""},
        {img: "yeehaw.gif", alt:"", link:""},
        {img: "youcomputeme.gif", alt:"", link:""}
    ];
    buttons = [
        {img: "2020survivor.png", alt:"", link:""},
        {img: "3ds.png", alt:"", link:""},
        {img: "aacs.png", alt:"", link:""},
        {img: "acab.gif", alt:"", link:""},
        {img: "anarchism.png", alt:"", link:""},
        {img: "anarchist_lib.png", alt:"", link:""},
        {img: "anarchynow.gif", alt:"", link:""},
        {img: "antifa.gif", alt:"", link:""},
        {img: "aseprite.gif", alt:"", link:""},
        {img: "barnaby_welcome_home.gif", alt:"", link:""},
        {img: "bbflipnote.gif", alt:"", link:""},
        {img: "bi_cdrom.jpg", alt:"", link:""},
        {img: "buttonstairs.gif", alt:"", link:""},
        {img: "cadence.png", alt:"", link:""},
        {img: "caramelldansen.gif", alt:"", link:""},
        {img: "communism_inside.gif", alt:"", link:""},
        {img: "cookie.gif", alt:"", link:""},
        {img: "corru.gif", alt:"", link:""},
        {img: "creep.png", alt:"", link:""},
        {img: "cutesocks.gif", alt:"", link:""},
        {img: "dbd.gif", alt:"", link:""},
        {img: "dreamnow.gif", alt:"", link:""},
        {img: "dream_in_html.gif", alt:"", link:""},
        {img: "girlsnow.png", alt:"", link:""},
        {img: "goatcounter.gif", alt:"", link:""},
        {img: "gregdock.gif", alt:"", link:""},
        {img: "hashtaggirl.gif", alt:"", link:""},
        {img: "hazard_E.png", alt:"", link:""},
        {img: "ihatesquarespace.png", alt:"", link:""},
        {img: "ilovesylveon.gif", alt:"", link:""},
        {img: "internet_privacy.gif", alt:"", link:""},
        {img: "kaowow.gif", alt:"", link:""},
        {img: "kriswhere.png", alt:"", link:""},
        {img: "lain.gif", alt:"", link:""},
        {img: "lesbian.jpg", alt:"", link:""},
        {img: "madewithpaws.png", alt:"", link:""},
        {img: "makeneocities.gif", alt:"", link:""},
        {img: "navi.jpg", alt:"", link:""},
        {img: "nb_pride.png", alt:"", link:""},
        {img: "nb_winbig.jpg", alt:"", link:""},
        {img: "noclick.gif", alt:"", link:""},
        {img: "nyatilde.gif", alt:"", link:""},
        {img: "parental.gif", alt:"", link:""},
        {img: "pierrotmimequiz.png", alt:"I am a Pierrot Mime! Click here to take the clown quiz!", link:"https://clownfredzone.neocities.org/"},
        {img: "piracy.gif", alt:"", link:""},
        {img: "portal.png", alt:"", link:""},
        {img: "poweredbybob.gif", alt:"", link:""},
        {img: "powerestrogen1.jpg", alt:"", link:""},
        {img: "powerestrogen2.png", alt:"", link:""},
        {img: "queercoded.png", alt:"", link:""},
        {img: "queer_pride.png", alt:"", link:""},
        {img: "right2repair.png", alt:"", link:""},
        {img: "scottgames.gif", alt:"", link:""},
        {img: "SCP.gif", alt:"", link:""},
        {img: "sega.gif", alt:"", link:""},
        {img: "sharewareplease.gif", alt:"", link:""},
        {img: "shitify.gif", alt:"", link:""},
        {img: "slimesnow.png", alt:"", link:""},
        {img: "spite.png", alt:"", link:""},
        {img: "stairs.gif", alt:"", link:""},
        {img: "supporttrans.jpg", alt:"", link:""},
        {img: "toebeansNOW.gif", alt:"", link:""},
        {img: "torrentseed.gif", alt:"", link:""},
        {img: "tranarchy.gif", alt:"", link:""},
        {img: "transbounce.gif", alt:"", link:""},
        {img: "transrightsnow.gif", alt:"", link:""},
        {img: "transwave.gif", alt:"", link:""},
        {img: "trans_your_gender.gif", alt:"", link:""},
        {img: "tummy.gif", alt:"", link:""},
        {img: "unspooked.png", alt:"", link:""},
        {img: "void.gif", alt:"", link:""},
        {img: "web3.gif", alt:"", link:""},
        {img: "webpassion.gif", alt:"", link:""},
    ];
    stamps = [
        {img: "3ds.gif", alt:"", link:""},
        {img: "3dsowner.jpg", alt:"", link:""},
        {img: "aaaaaaaa.gif", alt:"", link:""},
        {img: "acronyms.gif", alt:"", link:""},
        {img: "altf4.gif", alt:"", link:""},
        {img: "atari.gif", alt:"", link:""},
        {img: "babygirl.gif", alt:"", link:""},
        {img: "badapple.gif", alt:"", link:""},
        {img: "batemanill.gif", alt:"", link:""},
        {img: "beinghuman.gif", alt:"", link:""},
        {img: "breakcoreexclam.png", alt:"", link:""},
        {img: "caramelldansen.gif", alt:"", link:""},
        {img: "cassette.gif", alt:"", link:""},
        {img: "catgirl.png", alt:"", link:""},
        {img: "ceilingcat.gif", alt:"", link:""},
        {img: "celeste.png", alt:"", link:""},
        {img: "centeryourstamps.png", alt:"", link:""},
        {img: "colond.gif", alt:"", link:""},
        {img: "colonthreesplosion.png", alt:"", link:""},
        {img: "containsfail.png", alt:"", link:""},
        {img: "deadlylaser.gif", alt:"", link:""},
        {img: "deadnazi.jpg", alt:"", link:""},
        {img: "dotheflop.gif", alt:"", link:""},
        {img: "drawinmath.png", alt:"", link:""},
        {img: "duckhold.png", alt:"", link:""},
        {img: "dyke.gif", alt:"", link:""},
        {img: "eeper.gif", alt:"", link:""},
        {img: "eeveefan.gif", alt:"", link:""},
        {img: "emoticons.gif", alt:"", link:""},
        {img: "epic.gif", alt:"", link:""},
        {img: "error.gif", alt:"", link:""},
        {img: "faggot.png", alt:"", link:""},
        {img: "feli1.png", alt:"", link:""},
        {img: "gameboy.gif", alt:"", link:""},
        {img: "gameovererror.gif", alt:"", link:""},
        {img: "gamergarden.png", alt:"", link:""},
        {img: "gayminecraft.png", alt:"", link:""},
        {img: "genderhuh.png", alt:"", link:""},
        {img: "gfgay.png", alt:"", link:""},
        {img: "hardlylogout.png", alt:"", link:""},
        {img: "heartisopod.png", alt:"", link:""},
        {img: "heartisopod.png", alt:"", link:""},
        {img: "hearts.gif", alt:"", link:""},
        {img: "hell.png", alt:"", link:""},
        {img: "htmlsucks.png", alt:"", link:""},
        {img: "hugyourdragon.gif", alt:"", link:""},
        {img: "illkillyou.png", alt:"", link:""},
        {img: "iloveminecraft.png", alt:"", link:""},
        {img: "iloveportals.gif", alt:"", link:""},
        {img: "ilovesleeping.gif", alt:"", link:""},
        {img: "ilovesnacking.gif", alt:"", link:""},
        {img: "ilovestamps.gif", alt:"", link:""},
        {img: "ilovestrawberry.png", alt:"", link:""},
        {img: "ilovetoeatstamps.gif", alt:"", link:""},
        {img: "ilovewooper.gif", alt:"", link:""},
        {img: "iloveyou.gif", alt:"", link:""},
        {img: "imsilly.png", alt:"", link:""},
        {img: "isupportwerewolves.png", alt:"", link:""},
        {img: "jellyfish.gif", alt:"", link:""},
        {img: "jermba.png", alt:"", link:""},
        {img: "jolyne.png", alt:"", link:""},
        {img: "kaomoji.png", alt:"", link:""},
        {img: "kirby.gif", alt:"", link:""},
        {img: "kuromi.png", alt:"", link:""},
        {img: "lain1.gif", alt:"", link:""},
        {img: "lain2.gif", alt:"", link:""},
        {img: "lmfao.png", alt:"", link:""},
        {img: "machinegirl.gif", alt:"", link:""},
        {img: "middlecat.gif", alt:"", link:""},
        {img: "miku.webp", alt:"", link:""},
        {img: "mikubluelife.png", alt:"", link:""},
        {img: "minecraftbee.png", alt:"", link:""},
        {img: "missing.png", alt:"", link:""},
        {img: "mspain.jpg", alt:"", link:""},
        {img: "mybrainisrotting.gif", alt:"", link:""},
        {img: "neosupport.gif", alt:"", link:""},
        {img: "noise.png", alt:"", link:""},
        {img: "nononono.gif", alt:"", link:""},
        {img: "nosignal.gif", alt:"", link:""},
        {img: "notexture.png", alt:"", link:""},
        {img: "nyancat.gif", alt:"", link:""},
        {img: "nyanstamp.gif", alt:"", link:""},
        {img: "oingoboingo.png", alt:"", link:""},
        {img: "oldweb.jpg", alt:"", link:""},
        {img: "oldweb.png", alt:"", link:""},
        {img: "onfire.gif", alt:"", link:""},
        {img: "pantoneholographic.gif", alt:"", link:""},
        {img: "papasburgeria.gif", alt:"", link:""},
        {img: "petscop.png", alt:"", link:""},
        {img: "plague.png", alt:"", link:""},
        {img: "playtf2now.gif", alt:"", link:""},
        {img: "plutonotplanet.jpg", alt:"", link:""},
        {img: "pokemonmysterydungeon.gif", alt:"", link:""},
        {img: "portal1.png", alt:"", link:""},
        {img: "portal2.png", alt:"", link:""},
        {img: "propaganda.png", alt:"", link:""},
        {img: "pyro.gif", alt:"", link:""},
        {img: "quagsire.png", alt:"", link:""},
        {img: "rabies.png", alt:"", link:""},
        {img: "rainbowbarf.gif", alt:"", link:""},
        {img: "rainbowsocks.png", alt:"", link:""},
        {img: "realpaper.jpg", alt:"", link:""},
        {img: "redactedatbirth.png", alt:"", link:""},
        {img: "reefblower.gif", alt:"", link:""},
        {img: "rickroll.gif", alt:"", link:""},
        {img: "robloxmanface.png", alt:"", link:""},
        {img: "robotsheart.gif", alt:"", link:""},
        {img: "scenepattern.gif", alt:"", link:""},
        {img: "sexyawesomegay.jpg", alt:"", link:""},
        {img: "shaky.gif", alt:"", link:""},
        {img: "sharpedges.gif", alt:"", link:""},
        {img: "slime2.png", alt:"", link:""},
        {img: "slimegirl.png", alt:"", link:""},
        {img: "slimeGIRLS.png", alt:"", link:""},
        {img: "smilies.gif", alt:"", link:""},
        {img: "socialcomputers.png", alt:"", link:""},
        {img: "socialistfurry.png", alt:"", link:""},
        {img: "special.png", alt:"", link:""},
        {img: "spikedcollar.png", alt:"", link:""},
        {img: "spiritphone.png", alt:"", link:""},
        {img: "stargazer.png", alt:"", link:""},
        {img: "static.gif", alt:"", link:""},
        {img: "static.png", alt:"", link:""},
        {img: "stormlover.gif", alt:"", link:""},
        {img: "supportneilcicierega.jpg", alt:"", link:""},
        {img: "taskmanager.gif", alt:"", link:""},
        {img: "tentacle.gif", alt:"", link:""},
        {img: "therians.jpg", alt:"", link:""},
        {img: "theythemfish.png", alt:"", link:""},
        {img: "tism.png", alt:"", link:""},
        {img: "toofunnytoload.jpg", alt:"", link:""},
        {img: "transhc.png", alt:"", link:""},
        {img: "transpride.png", alt:"", link:""},
        {img: "transring.gif", alt:"", link:""},
        {img: "typos.gif", alt:"", link:""},
        {img: "undertale.png", alt:"", link:""},
        {img: "waves.gif", alt:"", link:""},
        {img: "wiggly.gif", alt:"", link:""},
        {img: "wooperday.png", alt:"", link:""},
        {img: "xd.png", alt:"", link:""},
        {img: "yalikejazz.png", alt:"", link:""},
        {img: "yippee.png", alt:"", link:""},
        {img: "youareanidiot.gif", alt:"", link:""},
        {img: "youdied.jpg", alt:"", link:""},
    ];
    badges = [
        {img: "7zip.gif", alt:"7-ZIP NOW", link:""},
        {img: "404.gif", alt:"404 NOT FOUND", link:""},
        {img: "anarchist.gif", alt:"ANARCHIST", link:""},
        {img: "anime.gif", alt:"I ü§ç ANIME", link:""},
        {img: "bisexual.gif", alt:"BISEXUAL", link:""},
        {img: "clickhere.gif", alt:"! CLICK HERE !", link:""},
        {img: "firefox.gif", alt:"FIREFOX", link:""},
        {img: "freetouse.gif", alt:"FREE TO USE", link:""},
        {img: "hellokitty.gif", alt:"HELLO KITTY", link:""},
        {img: "npp.png", alt:"GET NOTEPAD++", link:""},
        {img: "punkinside.gif", alt:"PUNK INSIDE", link:""},
        {img: "radiohead.gif", alt:"RADIOHEAD", link:""},
        {img: "sinlust.gif", alt:"SIN LUST", link:""},
        {img: "softstomachs.png", alt:"I <3 SOFT STOMACHS", link:""}
    ];
    userboxes = [
        {img: "lovesdinosaurs.png", alt:"This user loves dinosaurs.", link:""},
        {img: "notoutside.jpg", alt:"this usr doesn go outsied", link:""},
        {img: "radioactive.jpg", alt:"This user is radioactive.", link:""},
        {img: "victimizedhussie.jpg", alt:"This user has been victimized by Andrew Hussie.", link:""}
    ];
    otherthings = [
        {img: "artist.png", alt:"artist", link:""},
        {img: "furry.png", alt:"furry", link:""}
    ];

    shuffleArray(blinkies).forEach(x => { if (x.link != "") {marquees.blinkie.innerHTML += `<a href="${x.link}"><img class="blinkie" src="assets/mq/blinkie/${x.img}" alt="${x.alt}"></a>`} else {marquees.blinkie.innerHTML += `<img class="blinkie" src="assets/mq/blinkie/${x.img}" alt="${x.alt}">`} });
    shuffleArray(buttons).forEach(x => { if (x.link != "") {marquees.button.innerHTML += `<a href="${x.link}"><img class="button" src="assets/mq/button/${x.img}" alt="${x.alt}"></a>`} else {marquees.button.innerHTML += `<img class="button" src="assets/mq/button/${x.img}" alt="${x.alt}">`} });
    shuffleArray(stamps).forEach(x => { if (x.link != "") {marquees.stamp.innerHTML += `<a href="${x.link}"><img class="stamp" src="assets/mq/stamp/${x.img}" alt="${x.alt}"></a>`} else {marquees.stamp.innerHTML += `<img class="stamp" src="assets/mq/stamp/${x.img}" alt="${x.alt}">`} });
    shuffleArray(badges).forEach(x => { if (x.link != "") {marquees.badge.innerHTML += `<a href="${x.link}"><img class="badge" src="assets/mq/badge/${x.img}" alt="${x.alt}"></a>`} else {marquees.badge.innerHTML += `<img class="badge" src="assets/mq/badge/${x.img}" alt="${x.alt}">`} });
    shuffleArray(userboxes).forEach(x => { if (x.link != "") {marquees.userbox.innerHTML += `<a href="${x.link}"><img class="userbox" src="assets/mq/userbox/${x.img}" alt="${x.alt}"></a>`} else {marquees.userbox.innerHTML += `<img class="userbox" src="assets/mq/userbox/${x.img}" alt="${x.alt}">`} });
    shuffleArray(otherthings).forEach(x => { if (x.link != "") {marquees.otherthing.innerHTML += `<a href="${x.link}"><img class="otherthing" src="assets/mq/otherthing/${x.img}" alt="${x.alt}"></a>`} else {marquees.otherthing.innerHTML += `<img class="otherthing" src="assets/mq/otherthing/${x.img}" alt="${x.alt}">`} });
}